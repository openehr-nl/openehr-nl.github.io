<h2>Mapping</h2>

<dl>
    <dt>Templates</dt>
        <dd>{% for template in page.openEHR.templates %}
            {% assign template_file = template | append: ".t" %}
            {% assign template_files = site.static_files | where: "basename", template_file %}
            {% assign template_ckm = template_files | where_exp: "item", "item.path contains '/templates/'" %}
            {% assign template_local = template_files | where_exp: "item", "item.path contains '/local/'" %}
            {% if template_ckm.size > 0 %}
            <a href="{{ layout.github_prefix }}/templates/{{ template_ckm[0].name }}">{{ template }}</a>
            <a href="{{ layout.ckm_prefix }}/templates/{{ template }}" class="btn btn-outline fs-1 v-align-text-bottom">CKM</a>
            {% endif %}{% if template_local.size > 0 %}
            <a href="{{ layout.github_prefix }}/local/{{ template_local[0].name }}">{{ template }} (local)</a>
            {% endif %}{% unless forloop.last %}, {% endunless %}
        {% endfor %}</dd>
    <dt>Archetypes</dt>
        <dd>{% for archetype in page.openEHR.archetypes %}
            {% assign archetype_files = site.static_files | where: "basename", archetype %}
            {% assign archetype_ckm = archetype_files | where_exp: "item", "item.path contains '/archetypes/'" %}
            {% assign archetype_local = archetype_files | where_exp: "item", "item.path contains '/local/'" %}
            {% if archetype_ckm.size > 0 %}
            <a href="{{ layout.github_prefix }}/archetypes/{{ archetype_ckm[0].name }}">{{ archetype }}</a>
            <a href="{{ layout.ckm_prefix }}/archetypes/{{ archetype }}" class="btn btn-outline fs-1 v-align-text-bottom">CKM</a>
            {% endif %}{% if archetype_local.size > 0 %}
            <a href="{{ layout.github_prefix }}/local/{{ archetype_local[0].name }}">{{ archetype }} (local)</a>
            {% endif %}{% unless forloop.last %}, {% endunless %}
        {% endfor %}</dd>
</dl>

{% assign concept = page.name | replace: '.md', '' %}
{% assign mapping = site.data.mappings[concept] %}
{% if mapping %}
<table>
    <thead>
    {% for column in mapping[0] %}
    <th>{{ column[0] }}</th>
    {% endfor %}
    </thead>
    <tbody>
    {% for row in mapping %}
    <tr>
        {% for cell in row %}
        <td>{{ cell[1] }}</td>
        {% endfor %}
    </tr>
    {% endfor %}
    </tbody>
</table>
Deze <strong>mapping</strong> is beschikbaar als <a href="{{ layout.github_prefix }}/data/mappings/{{ concept }}.csv">{{ concept }}.csv</a> bestand.
{% endif %}
